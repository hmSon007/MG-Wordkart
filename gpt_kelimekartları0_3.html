<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MG WordKart</title>
    <style>
        :root{
            --bg:#0f172a;           /* slate-900 */
            --panel:#111827;        /* gray-900 */
            --muted:#94a3b8;        /* slate-400 */
            --text:#e5e7eb;         /* gray-200 */
            --accent:#22d3ee;       /* cyan-400 */
            --accent-2:#6366f1;     /* indigo-500 */
            --good:#10b981;         /* emerald-500 */
            --bad:#ef4444;          /* red-500 */
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
            background: radial-gradient(1200px 800px at 70% -10%, #1f2937 0%, var(--bg) 60%);
            color:var(--text);
        }
        .wrap{min-height:100%; display:flex; align-items:center; justify-content:center; padding:24px}
        .panel{width:min(960px,100%); background:linear-gradient(180deg, rgba(255,255,255,0.04), transparent 120px), var(--panel); border:1px solid rgba(255,255,255,0.08); box-shadow:0 10px 40px rgba(0,0,0,0.35); border-radius:20px; padding:24px}
        header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}
        .brand{display:flex; align-items:center; gap:12px}
        .logo{width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); display:grid; place-items:center; font-weight:700; color:#061018}
        h1{font-size:20px; margin:0}
        .muted{color:var(--muted)}

        /* VIEWS */
        .view{display:none}
        .view.active{display:block}

        /* HOME */
        .home-grid{display:grid; grid-template-columns: 1.2fr 1fr; gap:24px}
        @media (max-width: 800px){ .home-grid{grid-template-columns:1fr;}}
        .card{background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08); border-radius:16px; padding:20px}
        .row{display:flex; align-items:center; justify-content:space-between; gap:12px}
        .kpi{font-size:32px; font-weight:700}
        .range{width:100%}
        input[type=range]{width:100%}
        .btn{appearance:none; border:0; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer}
        .btn.primary{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#061018}
        .btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,0.15)}
        
        /* Yeni buton stilleri */
        .btn.gradient-blue{
            background: linear-gradient(90deg, #6366f1, #22d3ee);
            color: #fff;
            box-shadow: 0 4px 15px rgba(34, 211, 238, 0.3);
            transition: all 0.3s ease;
        }
        .btn.gradient-blue:hover{
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 211, 238, 0.4);
        }
        
        .btn.gradient-cyan{
            background: linear-gradient(90deg, #22d3ee, #6366f1);
            color: #fff;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
        }
        .btn.gradient-cyan:hover{
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }


        /* FLASHCARDS */
        .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}
        .counter{font-variant-numeric: tabular-nums; font-weight:700}
        .flash-wrap{display:grid; gap:16px; place-items:center}
        .flip-scene{width:min(560px, 92vw); height:320px; perspective:1200px}
        .flip-card{position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .5s ease}
        .flip-card.is-flipped{transform:rotateY(180deg)}
        .face{
            position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:24px; text-align:center; font-size:clamp(22px, 5vw, 36px);
            border-radius:18px; border:1px solid rgba(255,255,255,0.12);
            background:linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            box-shadow:inset 0 1px 0 rgba(255,255,255,0.05);
            /* This line prevents the back of the card from being visible from the front */
            backface-visibility: hidden;
        }
        .face.back{transform:rotateY(180deg)}
        .word{line-height:1.2}
        .speak{
            display:flex; gap:8px;
            /* These lines ensure the buttons are only visible on the respective face */
            position:absolute; bottom:10px; right:10px;
        }
        .speak button{border:1px solid rgba(255,255,255,0.15); background:rgba(0,0,0,0.25); color:var(--text); border-radius:10px; padding:6px 10px; cursor:pointer; opacity:0.8;}
        .speak button:hover{opacity:1;}

        .controls{display:flex; gap:12px; flex-wrap:wrap; justify-content: center;}
        .controls .btn{min-width:120px}
        
        .hint{font-size:12px; color:var(--muted)}

        /* VIEWED CARDS LIST */
        .word-list{display: grid; gap: 8px;}
        .word-list-item{display: flex; justify-content: space-between; padding: 10px; border-radius: 8px; background: rgba(255, 255, 255, 0.05); cursor: pointer;}
        .word-list-item:hover{background: rgba(255, 255, 255, 0.1);}
        
        /* ADD CARD */
        .add-card-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .add-card-form label {
            color: var(--muted);
            font-size: 14px;
        }
        .add-card-form input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            font-size: 16px;
        }
        .add-card-form input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .add-card-form .btn {
            width: 100%;
        }
        .message {
            margin-top: 12px;
            text-align: center;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .message.show {
            opacity: 1;
        }
        
        /* ABOUT */
        .about-content{padding: 16px; line-height: 1.6;}
        .about-footer{
            margin-top: 24px;
            text-align: center;
            font-size: 2.5em; /* Kocaman font */
            font-weight: 700;
            color: rgba(255, 255, 255, 0.1); /* Hafif soluk renk */
        }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="panel">
            <header>
                <div class="brand">
                    <div class="logo">MG</div>
                    <div>
                        <h1>MG WordKart</h1>
                        <div class="muted">Ä°ngilizce â‡„ TÃ¼rkÃ§e kartlarla Ã¶ÄŸren</div>
                    </div>
                </div>
                <button id="backBtn" class="btn ghost" style="display:none">â† Ana sayfa</button>
            </header>

            <!-- HOME VIEW -->
            <section id="home" class="view active">
                <div class="home-grid">
                    <div class="card">
                        <h2 style="margin-top:0">BugÃ¼n kaÃ§ kelime Ã§alÄ±ÅŸacaksÄ±n?</h2>
                        <div class="row" style="margin:8px 0 16px">
                            <div class="muted">Toplam kelime</div>
                            <div class="kpi"><span id="totalCount">0</span></div>
                        </div>
                        <label for="countRange" class="muted">SeÃ§im (min 5, max toplam)</label>
                        <input id="countRange" class="range" type="range" min="5" max="5" value="5" />
                        <div class="row" style="margin-top:6px">
                            <div class="muted">SeÃ§ilen</div>
                            <div class="kpi"><span id="chosenCount">5</span></div>
                        </div>
                        <div style="margin-top:16px; display:flex; gap:12px; flex-wrap:wrap">
                            <button id="startBtn" class="btn primary">Kartlarla Ã–ÄŸren</button>
                        </div>
                        <p class="hint" style="margin-top:12px">Ä°pucu: Space ile Ã§evir, â† / â†’ ile kart deÄŸiÅŸtir, mobilde saÄŸa/sola kaydÄ±r.</p>
                    </div>
                    <div class="card">
                        <h3 style="margin-top:0">NasÄ±l Ã§alÄ±ÅŸÄ±r?</h3>
                        <ol>
                            <li>KaÃ§ kelime Ã§alÄ±ÅŸacaÄŸÄ±nÄ± seÃ§.</li>
                            <li>â€œKartlarla Ã–ÄŸrenâ€e tÄ±kla.</li>
                            <li>KartÄ±n Ã¼stÃ¼ne tÄ±klayarak Ã§evir.</li>
                            <li>Ses ikonuyla telaffuz dinle (EN/TR).</li>
                        </ol>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <button id="viewedCardsBtn" class="btn gradient-blue">BAKILAN KARTLAR</button>
                            <button id="addCardBtn" class="btn gradient-cyan">YENÄ° KART EKLE</button>
                            <button id="aboutBtn" class="btn ghost">HAKKINDA</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FLASHCARDS VIEW -->
            <section id="flash" class="view">
                <div class="topbar">
                    <div class="muted">Ã‡alÄ±ÅŸma modu</div>
                    <div class="counter"><span id="idx">1</span>/<span id="len">1</span></div>
                </div>
                <div class="flash-wrap">
                    <div class="flip-scene" id="scene">
                        <div class="flip-card" id="card">
                            <div class="face front">
                                <div class="word" id="frontWord">Hello</div>
                                <div class="speak">
                                    <button id="speakEN" title="Ä°ngilizce telaffuz">ğŸ”Š EN</button>
                                </div>
                            </div>
                            <div class="face back">
                                <div class="word" id="backWord">Merhaba</div>
                                <div class="speak">
                                    <button id="speakTR" title="TÃ¼rkÃ§e telaffuz">ğŸ”Š TR</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="controls">
                        <button class="btn ghost" id="prevBtn">â¬… Ã–nceki</button>
                        <button class="btn primary" id="flipBtn">â†» Ã‡evir</button>
                        <button class="btn ghost" id="nextBtn">Sonraki â¡</button>
                    </div>
                </div>
            </section>
            
            <!-- VIEWED CARDS VIEW -->
            <section id="viewedCards" class="view">
                <h2 style="margin-top: 0;">BakÄ±lan Kartlar</h2>
                <div id="viewedCardsList" class="word-list">
                    <!-- Cards will be populated here -->
                </div>
            </section>
            
            <!-- ADD CARD VIEW -->
            <section id="addCard" class="view">
                <h2 style="margin-top: 0;">Yeni Kart Ekle</h2>
                <form id="addCardForm" class="add-card-form">
                    <div>
                        <label for="englishWord">Ä°ngilizce Kelime:</label>
                        <input type="text" id="englishWord" name="englishWord" required>
                    </div>
                    <div>
                        <label for="turkishWord">TÃ¼rkÃ§e KarÅŸÄ±lÄ±ÄŸÄ±:</label>
                        <input type="text" id="turkishWord" name="turkishWord" required>
                    </div>
                    <button type="submit" class="btn primary">Karta Ekle</button>
                </form>
                <div id="addCardMessage" class="message"></div>
            </section>

            <!-- ABOUT VIEW -->
            <section id="about" class="view">
                <div class="about-content">
                    <h2 style="margin-top: 0;">MG WordKart HakkÄ±nda</h2>
                    <p>Bu uygulama, Ä°ngilizce kelime bilginizi flaÅŸ kartlar aracÄ±lÄ±ÄŸÄ±yla geliÅŸtirmek iÃ§in tasarlanmÄ±ÅŸtÄ±r. Belirlenen kelime sayÄ±sÄ±nÄ± Ã§alÄ±ÅŸabilir ve daha Ã¶nce Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z kelimeleri tekrar gÃ¶zden geÃ§irebilirsiniz.</p>
                    <p>Uygulama, yerleÅŸik bir kelime havuzu kullanÄ±r ve tarayÄ±cÄ±nÄ±zÄ±n sesli okuma Ã¶zelliÄŸini kullanarak kelimelerin telaffuzunu dinlemenize olanak tanÄ±r.</p>
                    <p>UygulamayÄ± kullandÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz!</p>
                </div>
                <div class="about-footer">
                    MG STUDIOS
                </div>
            </section>
        </div>
    </div>

    <script>
        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” DATA â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        // Kelimelere 'level' Ã¶zelliÄŸi eklenmiÅŸtir. Bu versiyonda kullanÄ±lmasa da veri yapÄ±sÄ±nda korunmuÅŸtur.
        const ALL_WORDS = [
            {en:"Promotion", tr:"terfi", level: "a2"},
            {en:"Client", tr:"mÃ¼ÅŸteri", level: "a1"},
            {en:"Reamed", tr:"azarlamak", level: "c1"},
            {en:"Drag", tr:"sÃ¼rÃ¼klemek", level: "a2"},
            {en:"Above", tr:"Ã¼zerinde", level: "a1"},
            {en:"Hired", tr:"iÅŸe alÄ±ndÄ±", level: "b1"},
            {en:"Downsizing", tr:"kÃ¼Ã§Ã¼lmek", level: "b2"},
            {en:"Context", tr:"baÄŸlam", level: "b1"},
            {en:"Scold", tr:"sitem", level: "c2"},
            {en:"Lecture", tr:"birinin davranÄ±ÅŸlarÄ±nÄ± eleÅŸtirmek amacÄ±yla yapÄ±lan Ã¶fkeli veya ciddi konuÅŸma | ders", level: "b2"},
            {en:"Behave", tr:"davranmak", level: "a1"},
            {en:"Silently", tr:"sessizce", level: "a2"},
            {en:"Conditional", tr:"koÅŸullu", level: "c1"},
            {en:"Instead", tr:"baÅŸka bir ÅŸey yerine", level: "a2"},
            {en:"Individual", tr:"bireysel", level: "b1"},
            {en:"Extrude", tr:"dÄ±ÅŸarÄ± Ã§Ä±karmak, uzatmak", level: "c2"},
            {en:"Heaven", tr:"cennet | gÃ¶k", level: "b1"},
            {en:"Exchange looks with", tr:"bakÄ±ÅŸmak", level: "b1"},
            {en:"Through", tr:"baÅŸÄ±ndan sonuna kadar", level: "a1"},
            {en:"Covered", tr:"kapalÄ±", level: "a2"},
            {en:"Ruin", tr:"kalÄ±ntÄ±", level: "b1"},
            {en:"Toward", tr:"doÄŸru", level: "a2"},
            {en:"Shook", tr:"sarsÄ±lmak", level: "b2"},
            {en:"Tape", tr:"kaset", level: "a1"},
            {en:"Outlaw", tr:"kanun kaÃ§aÄŸÄ±", level: "c1"},
            {en:"Carrying", tr:"taÅŸÄ±mak", level: "a2"},
            {en:"Ceiling", tr:"tavan", level: "b1"},
            {en:"Orb", tr:"kÃ¼re", level: "c2"},
            {en:"Surrounded", tr:"Ã§evrili", level: "b2"},
            {en:"Notice", tr:"algÄ±lamak", level: "a2"},
            {en:"Roughly", tr:"kabaca | yaklaÅŸÄ±k olarak", level: "b1"},
            {en:"Patiently", tr:"sabÄ±rlÄ±", level: "a2"},
            {en:"Confuse", tr:"kafasÄ± karÄ±ÅŸmak", level: "b1"},
            {en:"Flame-thrower", tr:"alev makinesi", level: "c2"},
            {en:"Blew", tr:"patlamak | Ã¼flemek", level: "a1"},
            {en:"Thought", tr:"dÃ¼ÅŸÃ¼nmek", level: "a2"},
            {en:"Lifted", tr:"kaldÄ±rmak", level: "b1"},
            {en:"Immediately", tr:"hemen", level: "a1"},
            {en:"Pile", tr:"yÄ±ÄŸÄ±n", level: "b1"},
            {en:"Stuck", tr:"sÄ±kÄ±ÅŸmak", level: "a2"},
            {en:"Agreement", tr:"anlaÅŸma", level: "b2"},
            {en:"Arranged", tr:"planlanmÄ±ÅŸ", level: "b1"},
            {en:"Interrupt", tr:"kesintiye uÄŸramak", level: "c1"},
            {en:"Disappear", tr:"yok olmak", level: "a2"},
            {en:"Trouble", tr:"bela", level: "b1"},
            {en:"Throat", tr:"boÄŸaz", level: "b1"},
            {en:"Discuss", tr:"tartÄ±ÅŸmak", level: "a2"},
            {en:"Cross", tr:"geÃ§mek", level: "a1"},
            {en:"Tie", tr:"baÄŸlamak", level: "a1"},
            {en:"Shelf", tr:"raf", level: "a2"},
            {en:"Wide", tr:"geniÅŸ", level: "a1"},
            {en:"Document", tr:"belge", level: "a2"},
            {en:"Earn", tr:"para kazanmak", level: "b1"},
            {en:"Light", tr:"hafif", level: "a1"},
            {en:"Thirsty", tr:"susamÄ±ÅŸ", level: "a1"},
            {en:"Cost", tr:"maliyet", level: "a2"},
            {en:"Roof", tr:"Ã§atÄ±", level: "b1"},
            {en:"Borrow", tr:"Ã¶dÃ¼nÃ§ almak", level: "b1"},
            {en:"Crowded", tr:"kalabalÄ±k", level: "b1"},
            {en:"Toe", tr:"ayak parmaÄŸÄ±", level: "a2"},
            {en:"Shout", tr:"haykÄ±rmak", level: "a1"},
            {en:"Kick", tr:"tekmelemek", level: "a2"},
            {en:"Steal", tr:"Ã§almak", level: "b1"},
            {en:"Whole", tr:"bÃ¼tÃ¼n", level: "a1"},
            {en:"Agree", tr:"hemfikir olmak", level: "a2"},
            {en:"Stomachache", tr:"karÄ±n aÄŸrÄ±sÄ±", level: "a1"},
            {en:"Straight", tr:"dÃ¼z", level: "a2"},
            {en:"Attractive", tr:"Ã§ekici", level: "b1"},
            {en:"Elevator", tr:"asansÃ¶r", level: "a2"},
            {en:"Terrible", tr:"korkunÃ§", level: "a1"},
            {en:"Catch", tr:"yakalamak", level: "a2"},
            {en:"Capital", tr:"baÅŸkent", level: "b1"},
            {en:"Discount", tr:"indirim", level: "b1"},
            {en:"Improve", tr:"iyileÅŸtirmek | geliÅŸtirmek", level: "b2"},
            {en:"Invention", tr:"icat", level: "b1"},
            {en:"Attention", tr:"dikkat", level: "a1"},
            {en:"Hide", tr:"saklanmak", level: "a2"},
            {en:"Merchant", tr:"tÃ¼ccar", level: "c1"},
            {en:"Prescription", tr:"reÃ§ete", level: "c1"},
            {en:"Dock", tr:"rÄ±htÄ±m", level: "b2"},
            {en:"Stir", tr:"karÄ±ÅŸtÄ±rmak", level: "a1"},
            {en:"Insist", tr:"Ä±srar etmek", level: "b2"},
            {en:"Defeat", tr:"yenmek", level: "b2"},
            {en:"Check out", tr:"Ã§Ä±kÄ±ÅŸ yapmak", level: "a2"},
            {en:"Decrease", tr:"azalmak", level: "c1"},
            {en:"Hang", tr:"asmak", level: "a1"},
            {en:"Hug", tr:"sarÄ±lmak", level: "a1"},
            {en:"Bite", tr:"Ä±sÄ±rmak", level: "a2"},
            {en:"Pronounce", tr:"telaffuz etmek", level: "b1"},
            {en:"Distance", tr:"mesafe", level: "a2"},
            {en:"Trick", tr:"hile", level: "b1"},
            {en:"Burn", tr:"yakmak", level: "a2"},
            {en:"Relax", tr:"rahatlamak", level: "a1"},
            {en:"Fold", tr:"katlamak", level: "a2"},
            {en:"Explorer", tr:"kaÅŸif", level: "b1"},
            {en:"Apologize", tr:"Ã¶zÃ¼r dilemek", level: "b2"},
            {en:"Pentagon", tr:"beÅŸgen", level: "c1"},
            {en:"Mind", tr:"zihin", level: "a2"},
            {en:"Departure", tr:"kalkÄ±ÅŸ", level: "b2"},
            {en:"Dirt", tr:"kir", level: "a1"},
            {en:"Essay", tr:"deneme", level: "c1"},
            {en:"Disturbance", tr:"rahatsÄ±zlÄ±k", level: "c2"},
            {en:"Fountain", tr:"fÄ±skiye", level: "b1"},
            {en:"Dungeon", tr:"zindan", level: "c2"},
            {en:"Announce", tr:"duyurmak", level: "b1"},
            {en:"Nasty", tr:"berbat", level: "c2"},
            {en:"Patient", tr:"sabÄ±rlÄ±", level: "a2"},
            {en:"Recommend", tr:"tavsiye etmek", level: "b1"},
            {en:"Harbor", tr:"liman", level: "b2"},
            {en:"Attitude", tr:"tavÄ±r", level: "c1"},
            {en:"Opinion", tr:"fikir | gÃ¶rÃ¼ÅŸ", level: "a2"},
            {en:"Apology", tr:"Ã¶zÃ¼r", level: "b2"},
            {en:"Proud", tr:"gururlu", level: "a1"},
            {en:"Expedition", tr:"sefer", level: "c1"},
            {en:"Defect", tr:"kusur", level: "c2"},
            {en:"Slander", tr:"iftira", level: "c1"},
            {en:"Tailor", tr:"terzi", level: "c2"},
            {en:"Explode", tr:"patlamak", level: "b1"},
            {en:"Bury", tr:"gÃ¶mmek", level: "b2"},
            {en:"Complain", tr:"ÅŸikayet etmek", level: "b2"},
            {en:"Spare", tr:"yedek", level: "c1"},
            {en:"Tiny", tr:"kÃ¼Ã§Ã¼cÃ¼k", level: "a1"},
            {en:"Epidemic", tr:"salgÄ±n", level: "c2"},
            {en:"Hurry", tr:"acele etmek", level: "a1"},
            {en:"Calendar", tr:"takvim", level: "a1"},
            {en:"Polite", tr:"kibar", level: "a2"},
            {en:"Rent", tr:"kiralamak", level: "b1"},
            {en:"North", tr:"kuzey", level: "a1"},
            {en:"Mall", tr:"AVM, bÃ¼yÃ¼k kapalÄ± alÄ±ÅŸveriÅŸ merkezi", level: "a2"},
            {en:"Meter", tr:"metre", level: "a1"},
            {en:"Tall", tr:"uzun, uzun boylu", level: "a1"},
            {en:"Faucet", tr:"musluk", level: "b2"},
            {en:"Innocently", tr:"masumca", level: "c1"},
            {en:"Recognize", tr:"tanÄ±mak, bilmek", level: "b1"},
            {en:"Nervously", tr:"sinirli/tedirgin bir ÅŸekilde", level: "c2"},
            {en:"Several", tr:"birkaÃ§", level: "b1"},
            {en:"Taught", tr:"Ã¶ÄŸretmek (teach fiilinin geÃ§miÅŸ zamanÄ±)", level: "a2"},
            {en:"Decision", tr:"karar", level: "b1"},
            {en:"Obey", tr:"itaat etmek, sÃ¶z dinlemek", level: "b2"},
            {en:"Honor", tr:"ÅŸeref, onur", level: "c1"},
            {en:"Xandarians", tr:"Xandar halkÄ± (Ã¶zel isim)", level: "c2"},
            {en:"Commanded", tr:"emretmek, komuta etmek", level: "b1"},
            {en:"Sword", tr:"kÄ±lÄ±Ã§", level: "b2"},
            {en:"Examined", tr:"incelemek, muayene etmek", level: "c1"},
            {en:"Replied", tr:"yanÄ±tlamak, cevap vermek", level: "a2"},
            {en:"Continued", tr:"devam etmek", level: "a1"},
            {en:"Fear", tr:"korku, endiÅŸe", level: "a2"},
            {en:"Madman", tr:"deli, Ã§Ä±lgÄ±n adam", level: "c1"},
            {en:"Scared", tr:"korkmuÅŸ, Ã¼rkmÃ¼ÅŸ", level: "a1"},
            {en:"Dishonorable", tr:"onursuz, haysiyetsiz", level: "c2"},
            {en:"Men", tr:"adamlar (man kelimesinin Ã§oÄŸulu)", level: "a1"},
            {en:"Rushed", tr:"acele etmek, koÅŸuÅŸturmak", level: "a2"},
            {en:"Quill", tr:"Quill (Ã¶zel isim)", level: "c2"},
            {en:"Amount", tr:"miktar", level: "b1"},
            {en:"Counter", tr:"tezgah, banko", level: "a2"},
            {en:"Accuser", tr:"suÃ§layÄ±cÄ± (Ã¶zel bir unvan)", level: "c1"},
            {en:"Brought", tr:"getirmek, gÃ¶tÃ¼rmek (bring V2)", level: "b2"},
            {en:"Feared", tr:"korkmak, Ã§ekinmek", level: "b1"},
            {en:"Guilty", tr:"suÃ§lu", level: "a2"},
            {en:"Stood", tr:"durmak, ayakta durmak (stand V2)", level: "b1"}
        ];

        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” STATE â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        let pool = [...ALL_WORDS];
        let deck = [];
        let viewedCards = []; // Yeni eklenen: Ã‡alÄ±ÅŸÄ±lan kartlarÄ±n listesi
        let idx = 0;
        let flipped = false;

        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ELMS â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        const views = { 
            home: document.getElementById('home'), 
            flash: document.getElementById('flash'), 
            viewedCards: document.getElementById('viewedCards'),
            addCard: document.getElementById('addCard'), // Yeni eklenen "Yeni Kart Ekle" gÃ¶rÃ¼nÃ¼mÃ¼
            about: document.getElementById('about') // Yeni eklenen hakkÄ±nda gÃ¶rÃ¼nÃ¼mÃ¼
        };
        const backBtn = document.getElementById('backBtn');
        const totalCountEl = document.getElementById('totalCount');
        const chosenCountEl = document.getElementById('chosenCount');
        const range = document.getElementById('countRange');
        const startBtn = document.getElementById('startBtn');
        const viewedCardsBtn = document.getElementById('viewedCardsBtn'); 
        const addCardBtn = document.getElementById('addCardBtn'); // Yeni eklenen "Yeni Kart Ekle" butonu
        const aboutBtn = document.getElementById('aboutBtn'); // Yeni eklenen hakkÄ±nda butonu
        const viewedCardsListEl = document.getElementById('viewedCardsList');
        const addCardForm = document.getElementById('addCardForm'); // Yeni kart ekleme formu
        const englishWordInput = document.getElementById('englishWord'); // Ä°ngilizce kelime inputu
        const turkishWordInput = document.getElementById('turkishWord'); // TÃ¼rkÃ§e kelime inputu
        const addCardMessage = document.getElementById('addCardMessage'); // Mesaj alanÄ±

        const sceneEl = document.getElementById('scene');
        const cardEl = document.getElementById('card');
        const frontWord = document.getElementById('frontWord');
        const backWord  = document.getElementById('backWord');
        const idxEl = document.getElementById('idx');
        const lenEl = document.getElementById('len');

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const flipBtn = document.getElementById('flipBtn');
        const speakENBtn = document.getElementById('speakEN');
        const speakTRBtn = document.getElementById('speakTR');

        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” INIT â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        function initHome(){
            totalCountEl.textContent = ALL_WORDS.length; // Toplam kelime sayÄ±sÄ±nÄ± ALL_WORDS'ten al
            range.max = ALL_WORDS.length;
            if(+range.value < 5) range.value = 5;
            if(+range.value > ALL_WORDS.length) range.value = ALL_WORDS.length;
            chosenCountEl.textContent = range.value;
            // Kelime havuzunu baÅŸlangÄ±Ã§ta tÃ¼m kelimelerle doldur
            pool = [...ALL_WORDS];
        }

        function show(view){
            Object.values(views).forEach(v=>v.classList.remove('active'));
            views[view].classList.add('active');
            backBtn.style.display = view !== 'home' ? 'inline-flex' : 'none';
        }

        // Shuffle fonksiyonu artÄ±k bir butonla Ã§aÄŸrÄ±lmadÄ±ÄŸÄ± iÃ§in start() iÃ§inde kullanÄ±lacak.
        function shuffle(arr){
            for(let i=arr.length-1;i>0;i--){
                const j = Math.floor(Math.random()*(i+1));
                [arr[i],arr[j]]=[arr[j],arr[i]];
            }
            return arr;
        }

        function start(){
            const n = Math.max(5, Math.min(pool.length, +range.value||5));
            deck = shuffle([...pool]).slice(0,n);
            lenEl.textContent = deck.length;
            idx = 0; flipped = false;
            viewedCards = []; // Ã‡alÄ±ÅŸmaya baÅŸlarken listeyi sÄ±fÄ±rla
            renderCard();
            show('flash');
        }

        function renderCard(){
            const item = deck[idx];
            if(!item){
                frontWord.textContent = 'Bitti!';
                backWord.textContent = 'TÃ¼m kartlarÄ± bitirdiniz.';
                return;
            }
            frontWord.textContent = item.en;
            backWord.textContent = item.tr;
            idxEl.textContent = String(idx+1);
            cardEl.classList.remove('is-flipped');
            flipped = false;
        }
        
        // BakÄ±lan kartlarÄ± listeler
        function showViewedCards(){
            viewedCardsListEl.innerHTML = ''; // Listeyi temizle
            if (viewedCards.length === 0) {
                viewedCardsListEl.innerHTML = '<p class="muted">HenÃ¼z hiÃ§ kart Ã§alÄ±ÅŸmadÄ±nÄ±z. BaÅŸlamak iÃ§in "Kartlarla Ã–ÄŸren" butonuna tÄ±klayÄ±n.</p>';
            } else {
                viewedCards.forEach(card => {
                    const item = document.createElement('div');
                    item.className = 'word-list-item';
                    item.innerHTML = `<span>${card.en}</span><span>${card.tr}</span>`;
                    item.addEventListener('click', () => {
                        speak(card.en, 'en-US'); // TÄ±klayÄ±nca kelimeyi seslendir
                    });
                    viewedCardsListEl.appendChild(item);
                });
            }
            show('viewedCards');
        }

        // Yeni kart ekleme sayfasÄ±nÄ± gÃ¶sterir
        function showAddCard(){
            addCardMessage.textContent = '';
            addCardForm.reset(); // Formu temizle
            show('addCard');
        }

        // HakkÄ±nda sayfasÄ±nÄ± gÃ¶sterir
        function showAbout(){
            show('about');
        }

        function flip(){ flipped = !flipped; cardEl.classList.toggle('is-flipped'); }
        function next(){
            // Bir sonraki karta geÃ§meden Ã¶nce mevcut kartÄ± bakÄ±lanlar listesine ekle
            if (deck[idx] && !viewedCards.includes(deck[idx])) {
                viewedCards.push(deck[idx]);
            }
            idx = (idx+1) % deck.length;
            renderCard();
        }
        function prev(){ idx = (idx-1+deck.length) % deck.length; renderCard(); }

        // Yeni kartÄ± ALL_WORDS'e ekleme fonksiyonu
        function addCard(en, tr) {
            ALL_WORDS.push({ en: en, tr: tr, level: "user-added" });
            initHome(); // Toplam kelime sayÄ±sÄ±nÄ± gÃ¼ncelle
        }

        // Formu gÃ¶nderince Ã§alÄ±ÅŸacak fonksiyon
        function handleAddCardSubmit(e) {
            e.preventDefault();
            const enWord = englishWordInput.value.trim();
            const trWord = turkishWordInput.value.trim();

            if (enWord && trWord) {
                addCard(enWord, trWord);
                addCardMessage.textContent = 'Yeni kart baÅŸarÄ±yla eklendi!';
                addCardMessage.classList.add('show');
                addCardForm.reset();
                setTimeout(() => {
                    addCardMessage.classList.remove('show');
                }, 3000);
            } else {
                addCardMessage.textContent = 'LÃ¼tfen her iki alanÄ± da doldurun.';
                addCardMessage.classList.add('show');
            }
        }

        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” TTS â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        function speak(text, lang){
            try{
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = lang; u.rate = 0.95; u.pitch = 1; u.volume = 1;
                window.speechSynthesis.speak(u);
            }catch(e){ console.warn('TTS desteklenmiyor', e); }
        }

        // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” EVENTS â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        // Start buttonuna tÄ±klandÄ±ÄŸÄ±nda doÄŸrudan flashcard ekranÄ±na geÃ§iÅŸ yapar.
        startBtn.addEventListener('click', start);

        range.addEventListener('input', ()=>{ chosenCountEl.textContent = range.value; });
        backBtn.addEventListener('click', ()=>{ show('home'); window.speechSynthesis.cancel(); });

        // Yeni butonlar iÃ§in event listener'lar
        viewedCardsBtn.addEventListener('click', showViewedCards);
        addCardBtn.addEventListener('click', showAddCard); // Yeni kart ekle butonu
        aboutBtn.addEventListener('click', showAbout);

        // AyrÄ± flip, next ve prev butonlarÄ± iÃ§in event listenerlar
        flipBtn.addEventListener('click', flip);
        nextBtn.addEventListener('click', next);
        prevBtn.addEventListener('click', prev);

        // Yeni kart ekleme formu iÃ§in event listener
        addCardForm.addEventListener('submit', handleAddCardSubmit);

        // Klavye kÄ±sayollarÄ±
        window.addEventListener('keydown', (e)=>{
            if(views.flash.classList.contains('active')){
                if(e.code==='Space'){ e.preventDefault(); flip(); }
                else if(e.key==='ArrowRight'){ next(); }
                else if(e.key==='ArrowLeft'){ prev(); }
            }
        });

        // Swipe (touch) desteÄŸi
        let startX=null;
        document.getElementById('scene').addEventListener('touchstart', (e)=>{ startX = e.touches[0].clientX; }, {passive:true});
        document.getElementById('scene').addEventListener('touchend', (e)=>{
            if(startX===null) return; const dx = e.changedTouches[0].clientX - startX; startX=null;
            if(Math.abs(dx) < 40) { flip(); return; }
            if(dx < 0) next(); else prev();
        });

        // KartÄ±n kendisine tÄ±klayÄ±nca dÃ¶nmesi iÃ§in event listener
        cardEl.addEventListener('click', (e)=>{
            // TÄ±klanan elementin bir buton olup olmadÄ±ÄŸÄ±nÄ± kontrol et
            if (e.target.closest('button')) {
                // EÄŸer bir butonsa, kartÄ± dÃ¶ndÃ¼rme iÅŸlemini durdur
                return;
            }
            flip();
        });

        // TTS butonlarÄ± iÃ§in ayrÄ± event listenerlar
        speakENBtn.addEventListener('click', ()=>{ if(deck[idx]) speak(deck[idx].en, 'en-US'); });
        speakTRBtn.addEventListener('click', ()=>{ if(deck[idx]) speak(deck[idx].tr, 'tr-TR'); });

        // Uygulama baÅŸlangÄ±cÄ±
        initHome();
    </script>
</body>
</html>
